"use strict";exports.id=639,exports.ids=[639],exports.modules={94639:(e,t,r)=>{r(87561),r(49411);let a=r(91860);r(88849),r(22286),r(65628),r(84492),r(72254),r(47261),r(41041),r(87503);let n=0,i={START_BOUNDARY:n++,HEADER_FIELD_START:n++,HEADER_FIELD:n++,HEADER_VALUE_START:n++,HEADER_VALUE:n++,HEADER_VALUE_ALMOST_DONE:n++,HEADERS_ALMOST_DONE:n++,PART_DATA_START:n++,PART_DATA:n++,END:n++},A=1,s={PART_BOUNDARY:A,LAST_BOUNDARY:A*=2},o=e=>32|e,E=()=>{};class d{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=E,this.onHeaderField=E,this.onHeadersEnd=E,this.onHeaderValue=E,this.onPartBegin=E,this.onPartData=E,this.onPartEnd=E,this.boundaryChars={},e="\r\n--"+e;let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r),this.boundaryChars[t[r]]=!0;this.boundary=t,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=i.START_BOUNDARY}write(e){let t,r,a=0,n=e.length,A=this.index,{lookbehind:E,boundary:d,boundaryChars:D,index:l,state:h,flags:T}=this,_=this.boundary.length,R=_-1,f=e.length,c=e=>{this[e+"Mark"]=a},u=e=>{delete this[e+"Mark"]},H=(e,t,r,a)=>{(void 0===t||t!==r)&&this[e](a&&a.subarray(t,r))},L=(t,r)=>{let n=t+"Mark";n in this&&(r?(H(t,this[n],a,e),delete this[n]):(H(t,this[n],e.length,e),this[n]=0))};for(a=0;a<n;a++)switch(t=e[a],h){case i.START_BOUNDARY:if(l===d.length-2){if(45===t)T|=s.LAST_BOUNDARY;else if(13!==t)return;l++;break}if(l-1==d.length-2){if(T&s.LAST_BOUNDARY&&45===t)h=i.END,T=0;else{if(T&s.LAST_BOUNDARY||10!==t)return;l=0,H("onPartBegin"),h=i.HEADER_FIELD_START}break}t!==d[l+2]&&(l=-2),t===d[l+2]&&l++;break;case i.HEADER_FIELD_START:h=i.HEADER_FIELD,c("onHeaderField"),l=0;case i.HEADER_FIELD:if(13===t){u("onHeaderField"),h=i.HEADERS_ALMOST_DONE;break}if(l++,45===t)break;if(58===t){if(1===l)return;L("onHeaderField",!0),h=i.HEADER_VALUE_START;break}if((r=o(t))<97||r>122)return;break;case i.HEADER_VALUE_START:if(32===t)break;c("onHeaderValue"),h=i.HEADER_VALUE;case i.HEADER_VALUE:13===t&&(L("onHeaderValue",!0),H("onHeaderEnd"),h=i.HEADER_VALUE_ALMOST_DONE);break;case i.HEADER_VALUE_ALMOST_DONE:if(10!==t)return;h=i.HEADER_FIELD_START;break;case i.HEADERS_ALMOST_DONE:if(10!==t)return;H("onHeadersEnd"),h=i.PART_DATA_START;break;case i.PART_DATA_START:h=i.PART_DATA,c("onPartData");case i.PART_DATA:if(A=l,0===l){for(a+=R;a<f&&!(e[a]in D);)a+=_;a-=R,t=e[a]}if(l<d.length)d[l]===t?(0===l&&L("onPartData",!0),l++):l=0;else if(l===d.length)l++,13===t?T|=s.PART_BOUNDARY:45===t?T|=s.LAST_BOUNDARY:l=0;else if(l-1===d.length){if(T&s.PART_BOUNDARY){if(l=0,10===t){T&=~s.PART_BOUNDARY,H("onPartEnd"),H("onPartBegin"),h=i.HEADER_FIELD_START;break}}else T&s.LAST_BOUNDARY&&45===t?(H("onPartEnd"),h=i.END,T=0):l=0}if(l>0)E[l-1]=t;else if(A>0){let e=new Uint8Array(E.buffer,E.byteOffset,E.byteLength);H("onPartData",0,A,e),A=0,c("onPartData"),a--}break;case i.END:break;default:throw Error(`Unexpected state entered: ${h}`)}L("onHeaderField"),L("onHeaderValue"),L("onPartData"),this.index=l,this.state=h,this.flags=T}end(){if(this.state===i.HEADER_FIELD_START&&0===this.index||this.state===i.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==i.END)throw Error("MultipartParser.end(): stream ended unexpectedly")}}async function D(e,t){let r,n,i,A,s,o;if(!/multipart/i.test(t))throw TypeError("Failed to fetch");let E=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!E)throw TypeError("no or bad content-type header, no multipart boundary");let D=new d(E[1]||E[2]),l=[],h=new a.FormData,T=e=>{i+=c.decode(e,{stream:!0})},_=e=>{l.push(e)},R=()=>{let e=new a.File(l,o,{type:s});h.append(A,e)},f=()=>{h.append(A,i)},c=new TextDecoder("utf-8");for await(let t of(c.decode(),D.onPartBegin=function(){D.onPartData=T,D.onPartEnd=f,r="",n="",i="",A="",s="",o=null,l.length=0},D.onHeaderField=function(e){r+=c.decode(e,{stream:!0})},D.onHeaderValue=function(e){n+=c.decode(e,{stream:!0})},D.onHeaderEnd=function(){if(n+=c.decode(),"content-disposition"===(r=r.toLowerCase())){let e=n.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);e&&(A=e[2]||e[3]||""),(o=function(e){let t=e.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let r=t[2]||t[3]||"",a=r.slice(r.lastIndexOf("\\")+1);return(a=a.replace(/%22/g,'"')).replace(/&#(\d{4});/g,(e,t)=>String.fromCharCode(t))}(n))&&(D.onPartData=_,D.onPartEnd=R)}else"content-type"===r&&(s=n);n="",r=""},e))D.write(t);return D.end(),h}t.toFormData=D}};